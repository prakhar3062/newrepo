{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport SwipeableViews from \"react-swipeable-views\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport { AuthForm } from \"./AuthForm\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport Button from \"@material-ui/core/Button\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\nimport AccountBox from \"@material-ui/icons/AccountBox\";\nimport { unauthenticated } from \"../../redux/actions/auth\";\nimport Link from \"@material-ui/core/Link\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    \"& .MuiTab-textColorPrimary.Mui-selected\": {\n      color: \"#ffffff\",\n      background: \"var(--theme)\"\n    },\n    \"& .MuiTabs-indicator\": {\n      display: \"none\"\n    },\n    \"& .MuiTab-textColorPrimary\": {\n      background: \"#dfdfdf\"\n    },\n    \"& .MuiButton-containedPrimary\": {\n      marginTop: \"1rem\"\n    }\n  },\n  Login: {\n    position: \"relative\",\n    marginTop: \"5rem\",\n    \"&::before\": {\n      top: \"0\",\n      left: \"0\",\n      width: \"440px\",\n      height: \"440px\",\n      content: '\"\"',\n      zIndex: \"-1\",\n      position: \"absolute\",\n      transform: \"translate(-50%, -50%)\",\n      background: \"url(/static/images/circleCenter.svg)\",\n      backgroundSize: \"cover\",\n      backgroundRepeat: \"no-repeat\"\n    },\n    [theme.breakpoints.down(\"sm\")]: {\n      marginTop: '1.5rem'\n    }\n  },\n  Img: {\n    textAlign: \"center\",\n    [theme.breakpoints.down(\"sm\")]: {\n      '& img': {\n        height: '65px'\n      }\n    }\n  },\n  orange: {\n    color: \"#fff\",\n    backgroundColor: \"var(--theme)\",\n    width: \"30px\",\n    height: \"30px\",\n    fontSize: \"1rem\"\n  },\n  transparent: {\n    color: \"#000\",\n    width: \"30px\",\n    height: \"25px\",\n    backgroundColor: \"transparent\"\n  },\n  desktopMenu: {\n    '& .MuiPopover-paper': {\n      minWidth: '200px',\n      textAlign: 'right'\n    },\n    '& li': {\n      justifyContent: 'space-between'\n    }\n  }\n}));\n\nconst Login_Register = ({\n  isMobile = false,\n  modalOpen = false\n}) => {\n  const {\n    0: open,\n    1: setOpen\n  } = useState(false);\n  const [value, setValue] = React.useState(0);\n  const router = useRouter();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const {\n    0: openAMenu,\n    1: setopenAMenu\n  } = useState(false);\n  const {\n    0: openBMenu,\n    1: setopenBMenu\n  } = useState(false);\n  const {\n    0: openCMenu,\n    1: setopenCMenu\n  } = useState(false);\n  const {\n    0: openDMenu,\n    1: setopenDMenu\n  } = useState(false);\n  const dispatch = useDispatch();\n\n  const toggleModal = () => {\n    if (location.search.indexOf(\"signup=open\") != -1) {\n      setOpen(true);\n    } else if (modalOpen != open) {\n      setOpen(modalOpen);\n    }\n  };\n\n  useEffect(() => {\n    toggleModal();\n  }, [modalOpen]);\n  router.events.on('routeChangeComplete', toggleModal);\n  const accessToken = useSelector(state => state.auth_user.accessToken);\n  const user = useSelector(state => state.auth_user.user); // console.log(\"User\", user);\n\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n\n  const handleChangeIndex = index => {\n    setValue(index);\n  };\n\n  const openModal = event => {\n    if (!accessToken) {\n      setOpen(true);\n    } else {\n      if (isMobile) {\n        gotoProfile();\n      } else {\n        setAnchorEl(event.currentTarget);\n      }\n    }\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const closeModal = () => {\n    setOpen(false);\n  };\n\n  const gotoProfile = () => {\n    router.push(\"/profile\");\n  };\n\n  const gotoProfileEdit = () => {\n    router.push(\"/profile/edit\");\n  };\n\n  const gotoEvents = () => {\n    router.push(\"/profile/events\");\n  };\n\n  const gotoRequeste = () => {\n    router.push(\"/profile/requests\");\n  };\n\n  const gotoFavEvents = () => {\n    router.push(\"/profile/favourite-events\");\n  };\n\n  const gotoFavProducts = () => {\n    router.push(\"/profile/favourite-products\");\n  };\n\n  const gotoAddRequest = () => {\n    router.push(\"/post/request\");\n  };\n\n  const gotoResetPassword = () => {\n    router.push(\"/profile/reset-password\");\n  };\n\n  const logout = () => {\n    setAnchorEl(null);\n    router.push(\"/\");\n    dispatch(unauthenticated());\n  };\n\n  const toggleASubmenu = () => {\n    setopenAMenu(!openAMenu);\n  };\n\n  const toggleBSubmenu = () => {\n    setopenBMenu(!openBMenu);\n  };\n\n  const toggleCSubmenu = () => {\n    setopenCMenu(!openCMenu);\n  };\n\n  const toggleDSubmenu = () => {\n    setopenDMenu(!openDMenu);\n  };\n\n  const classes = useStyles();\n  return __jsx(\"div\", null, __jsx(Avatar, {\n    onClick: openModal,\n    \"aria-controls\": \"auth-menu\",\n    \"aria-haspopup\": \"true\",\n    className: user.first_name ? classes.orange : classes.transparent\n  }, user.first_name ? user.first_name.charAt(0) : __jsx(AccountCircleIcon, null)), __jsx(Menu, {\n    id: \"auth-menu\",\n    anchorEl: anchorEl,\n    keepMounted: true,\n    open: Boolean(anchorEl),\n    onClose: handleClose // open={!!menuPosition}\n    // onClose={() => setMenuPosition({}) || handleClose}\n    // anchorReference=\"anchorPosition\"\n    // anchorPosition={menuPosition}\n    ,\n    className: classes.desktopMenu\n  }, __jsx(MenuItem, {\n    button: true,\n    onClick: toggleASubmenu\n  }, \"Profile\", openAMenu ? __jsx(ExpandLess, null) : __jsx(ExpandMore, null)), __jsx(Collapse, {\n    in: openAMenu,\n    timeout: \"auto\",\n    unmountOnExit: true\n  }, __jsx(MenuItem, {\n    onClick: gotoProfile\n  }, \"View Profile\"), __jsx(MenuItem, {\n    onClick: gotoResetPassword\n  }, \"Reset Password\")), __jsx(MenuItem, {\n    button: true,\n    onClick: toggleBSubmenu\n  }, \"Ads\", openBMenu ? __jsx(ExpandLess, null) : __jsx(ExpandMore, null)), __jsx(Collapse, {\n    in: openBMenu,\n    timeout: \"auto\",\n    unmountOnExit: true\n  }, __jsx(MenuItem, {\n    onClick: gotoProfile\n  }, \"Published Ads\"), __jsx(MenuItem, {\n    onClick: gotoFavProducts\n  }, \"Favourite Products\")), __jsx(MenuItem, {\n    button: true,\n    onClick: toggleCSubmenu\n  }, \"Events\", openCMenu ? __jsx(ExpandLess, null) : __jsx(ExpandMore, null)), __jsx(Collapse, {\n    in: openCMenu,\n    timeout: \"auto\",\n    unmountOnExit: true\n  }, __jsx(MenuItem, {\n    onClick: gotoEvents\n  }, \"Published Events\"), __jsx(MenuItem, {\n    onClick: gotoFavEvents\n  }, \"Favourite Events\")), __jsx(MenuItem, {\n    button: true,\n    onClick: toggleDSubmenu\n  }, \"Requests\", openDMenu ? __jsx(ExpandLess, null) : __jsx(ExpandMore, null)), __jsx(Collapse, {\n    in: openDMenu,\n    timeout: \"auto\",\n    unmountOnExit: true\n  }, __jsx(MenuItem, {\n    onClick: gotoRequeste\n  }, \"Published Requests\"), __jsx(MenuItem, {\n    onClick: gotoAddRequest\n  }, \"Add Product Request\")), __jsx(MenuItem, {\n    onClick: logout\n  }, \"Logout\")), __jsx(Dialog, {\n    open: open,\n    onClose: closeModal,\n    \"aria-labelledby\": \"form-dialog-title\",\n    className: classes.modal\n  }, __jsx(\"div\", {\n    className: classes.root\n  }, __jsx(Tabs, {\n    value: value,\n    onChange: handleChange,\n    variant: \"fullWidth\",\n    indicatorColor: \"primary\",\n    textColor: \"primary\"\n  }, __jsx(Tab, {\n    label: \"Login\"\n  }), __jsx(Tab, {\n    label: \"SignUp\"\n  })), __jsx(SwipeableViews, {\n    index: value,\n    onChangeIndex: handleChangeIndex\n  }, __jsx(\"div\", {\n    className: classes.Login\n  }, __jsx(\"div\", {\n    className: classes.Img\n  }, __jsx(\"img\", {\n    src: \"/static/images/logo.png\",\n    width: \"100\"\n  })), __jsx(AuthForm, {\n    type: \"login\"\n  })), __jsx(\"div\", null, __jsx(AuthForm, {\n    type: \"signup\"\n  }))))));\n};\n\nexport default Login_Register;","map":{"version":3,"sources":["C:/Users/91911/Downloads/frontend/src/components/Login_Register/index.js"],"names":["React","useState","useEffect","AccountCircleIcon","Dialog","makeStyles","useTheme","SwipeableViews","Tabs","Tab","AuthForm","Avatar","useDispatch","useSelector","useRouter","Button","Menu","MenuItem","Collapse","ExpandLess","ExpandMore","AccountBox","unauthenticated","Link","useStyles","theme","root","color","background","display","marginTop","Login","position","top","left","width","height","content","zIndex","transform","backgroundSize","backgroundRepeat","breakpoints","down","Img","textAlign","orange","backgroundColor","fontSize","transparent","desktopMenu","minWidth","justifyContent","Login_Register","isMobile","modalOpen","open","setOpen","value","setValue","router","anchorEl","setAnchorEl","openAMenu","setopenAMenu","openBMenu","setopenBMenu","openCMenu","setopenCMenu","openDMenu","setopenDMenu","dispatch","toggleModal","location","search","indexOf","events","on","accessToken","state","auth_user","user","handleChange","event","newValue","handleChangeIndex","index","openModal","gotoProfile","currentTarget","handleClose","closeModal","push","gotoProfileEdit","gotoEvents","gotoRequeste","gotoFavEvents","gotoFavProducts","gotoAddRequest","gotoResetPassword","logout","toggleASubmenu","toggleBSubmenu","toggleCSubmenu","toggleDSubmenu","classes","first_name","charAt","Boolean","modal"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,iBAAP,MAA8B,kCAA9B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,0BAArC;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,GAAP,MAAgB,uBAAhB;AACA,SAASC,QAAT,QAAyB,YAAzB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,SAASC,eAAT,QAAgC,0BAAhC;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AAEA,MAAMC,SAAS,GAAGnB,UAAU,CAAEoB,KAAD,KAAY;AACvCC,EAAAA,IAAI,EAAE;AACJ,+CAA2C;AACzCC,MAAAA,KAAK,EAAE,SADkC;AAEzCC,MAAAA,UAAU,EAAE;AAF6B,KADvC;AAKJ,4BAAwB;AACtBC,MAAAA,OAAO,EAAE;AADa,KALpB;AAQJ,kCAA8B;AAC5BD,MAAAA,UAAU,EAAE;AADgB,KAR1B;AAWJ,qCAAiC;AAC/BE,MAAAA,SAAS,EAAE;AADoB;AAX7B,GADiC;AAgBvCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAE,UADL;AAELF,IAAAA,SAAS,EAAE,MAFN;AAGL,iBAAa;AACXG,MAAAA,GAAG,EAAE,GADM;AAEXC,MAAAA,IAAI,EAAE,GAFK;AAGXC,MAAAA,KAAK,EAAE,OAHI;AAIXC,MAAAA,MAAM,EAAE,OAJG;AAKXC,MAAAA,OAAO,EAAE,IALE;AAMXC,MAAAA,MAAM,EAAE,IANG;AAOXN,MAAAA,QAAQ,EAAE,UAPC;AAQXO,MAAAA,SAAS,EAAE,uBARA;AASXX,MAAAA,UAAU,EAAE,sCATD;AAUXY,MAAAA,cAAc,EAAE,OAVL;AAWXC,MAAAA,gBAAgB,EAAE;AAXP,KAHR;AAgBL,KAAChB,KAAK,CAACiB,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,GAA+B;AAC7Bb,MAAAA,SAAS,EAAE;AADkB;AAhB1B,GAhBgC;AAoCvCc,EAAAA,GAAG,EAAE;AACHC,IAAAA,SAAS,EAAE,QADR;AAEH,KAACpB,KAAK,CAACiB,WAAN,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,GAA+B;AAC7B,eAAQ;AACNP,QAAAA,MAAM,EAAE;AADF;AADqB;AAF5B,GApCkC;AA4CvCU,EAAAA,MAAM,EAAE;AACNnB,IAAAA,KAAK,EAAE,MADD;AAENoB,IAAAA,eAAe,EAAE,cAFX;AAGNZ,IAAAA,KAAK,EAAE,MAHD;AAINC,IAAAA,MAAM,EAAE,MAJF;AAKNY,IAAAA,QAAQ,EAAE;AALJ,GA5C+B;AAmDvCC,EAAAA,WAAW,EAAE;AACXtB,IAAAA,KAAK,EAAE,MADI;AAEXQ,IAAAA,KAAK,EAAE,MAFI;AAGXC,IAAAA,MAAM,EAAE,MAHG;AAIXW,IAAAA,eAAe,EAAE;AAJN,GAnD0B;AAyDvCG,EAAAA,WAAW,EAAC;AACV,2BAAsB;AACpBC,MAAAA,QAAQ,EAAE,OADU;AAEpBN,MAAAA,SAAS,EAAE;AAFS,KADZ;AAKV,YAAO;AACLO,MAAAA,cAAc,EAAE;AADX;AALG;AAzD2B,CAAZ,CAAD,CAA5B;;AAoEA,MAAMC,cAAc,GAAG,CAAC;AAAEC,EAAAA,QAAQ,GAAG,KAAb;AAAoBC,EAAAA,SAAS,GAAG;AAAhC,CAAD,KAA6C;AAClE,QAAM;AAAA,OAACC,IAAD;AAAA,OAAOC;AAAP,MAAkBxD,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACyD,KAAD,EAAQC,QAAR,IAAoB3D,KAAK,CAACC,QAAN,CAAe,CAAf,CAA1B;AACA,QAAM2D,MAAM,GAAG9C,SAAS,EAAxB;AACA,QAAM,CAAC+C,QAAD,EAAWC,WAAX,IAA0B9D,KAAK,CAACC,QAAN,CAAe,IAAf,CAAhC;AACA,QAAM;AAAA,OAAC8D,SAAD;AAAA,OAAYC;AAAZ,MAA4B/D,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAAA,OAACgE,SAAD;AAAA,OAAYC;AAAZ,MAA4BjE,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAAA,OAACkE,SAAD;AAAA,OAAYC;AAAZ,MAA4BnE,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAAA,OAACoE,SAAD;AAAA,OAAYC;AAAZ,MAA4BrE,QAAQ,CAAC,KAAD,CAA1C;AAEA,QAAMsE,QAAQ,GAAG3D,WAAW,EAA5B;;AAEA,QAAM4D,WAAW,GAAG,MAAM;AACxB,QAAIC,QAAQ,CAACC,MAAT,CAAgBC,OAAhB,CAAwB,aAAxB,KAA0C,CAAC,CAA/C,EAAkD;AAChDlB,MAAAA,OAAO,CAAC,IAAD,CAAP;AACD,KAFD,MAEO,IAAIF,SAAS,IAAIC,IAAjB,EAAuB;AAC5BC,MAAAA,OAAO,CAACF,SAAD,CAAP;AACD;AACF,GAND;;AAQArD,EAAAA,SAAS,CAAC,MAAM;AACdsE,IAAAA,WAAW;AACZ,GAFQ,EAEN,CAACjB,SAAD,CAFM,CAAT;AAMAK,EAAAA,MAAM,CAACgB,MAAP,CAAcC,EAAd,CAAiB,qBAAjB,EAAwCL,WAAxC;AAEA,QAAMM,WAAW,GAAGjE,WAAW,CAAEkE,KAAD,IAAWA,KAAK,CAACC,SAAN,CAAgBF,WAA5B,CAA/B;AACA,QAAMG,IAAI,GAAGpE,WAAW,CAAEkE,KAAD,IAAWA,KAAK,CAACC,SAAN,CAAgBC,IAA5B,CAAxB,CA7BkE,CA8BlE;;AAEA,QAAMC,YAAY,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB;AACxCzB,IAAAA,QAAQ,CAACyB,QAAD,CAAR;AACD,GAFD;;AAIA,QAAMC,iBAAiB,GAAIC,KAAD,IAAW;AACnC3B,IAAAA,QAAQ,CAAC2B,KAAD,CAAR;AACD,GAFD;;AAGA,QAAMC,SAAS,GAAIJ,KAAD,IAAW;AAC3B,QAAI,CAACL,WAAL,EAAkB;AAChBrB,MAAAA,OAAO,CAAC,IAAD,CAAP;AACD,KAFD,MAEO;AACL,UAAIH,QAAJ,EAAc;AACZkC,QAAAA,WAAW;AACZ,OAFD,MAEO;AACL1B,QAAAA,WAAW,CAACqB,KAAK,CAACM,aAAP,CAAX;AACD;AACF;AACF,GAVD;;AAYA,QAAMC,WAAW,GAAG,MAAM;AACxB5B,IAAAA,WAAW,CAAC,IAAD,CAAX;AACD,GAFD;;AAIA,QAAM6B,UAAU,GAAG,MAAM;AACvBlC,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD,GAFD;;AAIA,QAAM+B,WAAW,GAAG,MAAM;AACxB5B,IAAAA,MAAM,CAACgC,IAAP,CAAY,UAAZ;AACD,GAFD;;AAGA,QAAMC,eAAe,GAAG,MAAM;AAC5BjC,IAAAA,MAAM,CAACgC,IAAP,CAAY,eAAZ;AACD,GAFD;;AAGA,QAAME,UAAU,GAAG,MAAM;AACvBlC,IAAAA,MAAM,CAACgC,IAAP,CAAY,iBAAZ;AACD,GAFD;;AAGA,QAAMG,YAAY,GAAG,MAAM;AACzBnC,IAAAA,MAAM,CAACgC,IAAP,CAAY,mBAAZ;AACD,GAFD;;AAGA,QAAMI,aAAa,GAAG,MAAK;AACzBpC,IAAAA,MAAM,CAACgC,IAAP,CAAY,2BAAZ;AACD,GAFD;;AAGA,QAAMK,eAAe,GAAG,MAAK;AAC3BrC,IAAAA,MAAM,CAACgC,IAAP,CAAY,6BAAZ;AACD,GAFD;;AAGA,QAAMM,cAAc,GAAG,MAAK;AAC1BtC,IAAAA,MAAM,CAACgC,IAAP,CAAY,eAAZ;AACD,GAFD;;AAGA,QAAMO,iBAAiB,GAAG,MAAM;AAC9BvC,IAAAA,MAAM,CAACgC,IAAP,CAAY,yBAAZ;AACD,GAFD;;AAKA,QAAMQ,MAAM,GAAG,MAAM;AACnBtC,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAF,IAAAA,MAAM,CAACgC,IAAP,CAAY,GAAZ;AACArB,IAAAA,QAAQ,CAACjD,eAAe,EAAhB,CAAR;AACD,GAJD;;AAMA,QAAM+E,cAAc,GAAG,MAAM;AAC3BrC,IAAAA,YAAY,CAAC,CAACD,SAAF,CAAZ;AACD,GAFD;;AAGA,QAAMuC,cAAc,GAAG,MAAM;AAC3BpC,IAAAA,YAAY,CAAC,CAACD,SAAF,CAAZ;AACD,GAFD;;AAGA,QAAMsC,cAAc,GAAG,MAAM;AAC3BnC,IAAAA,YAAY,CAAC,CAACD,SAAF,CAAZ;AACD,GAFD;;AAGA,QAAMqC,cAAc,GAAG,MAAM;AAC3BlC,IAAAA,YAAY,CAAC,CAACD,SAAF,CAAZ;AACD,GAFD;;AAIA,QAAMoC,OAAO,GAAGjF,SAAS,EAAzB;AAEA,SACE,mBACE,MAAC,MAAD;AACE,IAAA,OAAO,EAAE+D,SADX;AAEE,qBAAc,WAFhB;AAGE,qBAAc,MAHhB;AAIE,IAAA,SAAS,EAAEN,IAAI,CAACyB,UAAL,GAAkBD,OAAO,CAAC3D,MAA1B,GAAmC2D,OAAO,CAACxD;AAJxD,KAMGgC,IAAI,CAACyB,UAAL,GAAkBzB,IAAI,CAACyB,UAAL,CAAgBC,MAAhB,CAAuB,CAAvB,CAAlB,GAA8C,MAAC,iBAAD,OANjD,CADF,EASE,MAAC,IAAD;AACE,IAAA,EAAE,EAAC,WADL;AAEE,IAAA,QAAQ,EAAE9C,QAFZ;AAGE,IAAA,WAAW,MAHb;AAIE,IAAA,IAAI,EAAE+C,OAAO,CAAC/C,QAAD,CAJf;AAKE,IAAA,OAAO,EAAE6B,WALX,CAME;AACA;AACA;AACA;AATF;AAUE,IAAA,SAAS,EAAEe,OAAO,CAACvD;AAVrB,KAaI,MAAC,QAAD;AAAU,IAAA,MAAM,MAAhB;AAAiB,IAAA,OAAO,EAAEmD;AAA1B,gBAEGtC,SAAS,GAAG,MAAC,UAAD,OAAH,GAAoB,MAAC,UAAD,OAFhC,CAbJ,EAiBI,MAAC,QAAD;AAAU,IAAA,EAAE,EAAEA,SAAd;AAAyB,IAAA,OAAO,EAAC,MAAjC;AAAwC,IAAA,aAAa;AAArD,KACE,MAAC,QAAD;AAAU,IAAA,OAAO,EAAEyB;AAAnB,oBADF,EAEE,MAAC,QAAD;AAAU,IAAA,OAAO,EAAEW;AAAnB,sBAFF,CAjBJ,EAqBI,MAAC,QAAD;AAAU,IAAA,MAAM,MAAhB;AAAiB,IAAA,OAAO,EAAEG;AAA1B,YAEGrC,SAAS,GAAG,MAAC,UAAD,OAAH,GAAoB,MAAC,UAAD,OAFhC,CArBJ,EAyBI,MAAC,QAAD;AAAU,IAAA,EAAE,EAAEA,SAAd;AAAyB,IAAA,OAAO,EAAC,MAAjC;AAAwC,IAAA,aAAa;AAArD,KACE,MAAC,QAAD;AAAU,IAAA,OAAO,EAAEuB;AAAnB,qBADF,EAEE,MAAC,QAAD;AAAU,IAAA,OAAO,EAAES;AAAnB,0BAFF,CAzBJ,EA6BI,MAAC,QAAD;AAAU,IAAA,MAAM,MAAhB;AAAiB,IAAA,OAAO,EAAEM;AAA1B,eAEGpC,SAAS,GAAG,MAAC,UAAD,OAAH,GAAoB,MAAC,UAAD,OAFhC,CA7BJ,EAiCI,MAAC,QAAD;AAAU,IAAA,EAAE,EAAEA,SAAd;AAAyB,IAAA,OAAO,EAAC,MAAjC;AAAwC,IAAA,aAAa;AAArD,KACE,MAAC,QAAD;AAAU,IAAA,OAAO,EAAE2B;AAAnB,wBADF,EAEE,MAAC,QAAD;AAAU,IAAA,OAAO,EAAEE;AAAnB,wBAFF,CAjCJ,EAqCI,MAAC,QAAD;AAAU,IAAA,MAAM,MAAhB;AAAiB,IAAA,OAAO,EAAEQ;AAA1B,iBAEGnC,SAAS,GAAG,MAAC,UAAD,OAAH,GAAoB,MAAC,UAAD,OAFhC,CArCJ,EAyCI,MAAC,QAAD;AAAU,IAAA,EAAE,EAAEA,SAAd;AAAyB,IAAA,OAAO,EAAC,MAAjC;AAAwC,IAAA,aAAa;AAArD,KACE,MAAC,QAAD;AAAU,IAAA,OAAO,EAAE0B;AAAnB,0BADF,EAEE,MAAC,QAAD;AAAU,IAAA,OAAO,EAAEG;AAAnB,2BAFF,CAzCJ,EA6CI,MAAC,QAAD;AAAU,IAAA,OAAO,EAAEE;AAAnB,cA7CJ,CATF,EAyDE,MAAC,MAAD;AACE,IAAA,IAAI,EAAE5C,IADR;AAEE,IAAA,OAAO,EAAEmC,UAFX;AAGE,uBAAgB,mBAHlB;AAIE,IAAA,SAAS,EAAEc,OAAO,CAACI;AAJrB,KAME;AAAK,IAAA,SAAS,EAAEJ,OAAO,CAAC/E;AAAxB,KACE,MAAC,IAAD;AACE,IAAA,KAAK,EAAEgC,KADT;AAEE,IAAA,QAAQ,EAAEwB,YAFZ;AAGE,IAAA,OAAO,EAAC,WAHV;AAIE,IAAA,cAAc,EAAC,SAJjB;AAKE,IAAA,SAAS,EAAC;AALZ,KAOE,MAAC,GAAD;AAAK,IAAA,KAAK,EAAC;AAAX,IAPF,EAQE,MAAC,GAAD;AAAK,IAAA,KAAK,EAAC;AAAX,IARF,CADF,EAWE,MAAC,cAAD;AAAgB,IAAA,KAAK,EAAExB,KAAvB;AAA8B,IAAA,aAAa,EAAE2B;AAA7C,KACE;AAAK,IAAA,SAAS,EAAEoB,OAAO,CAAC1E;AAAxB,KACE;AAAK,IAAA,SAAS,EAAE0E,OAAO,CAAC7D;AAAxB,KACE;AAAK,IAAA,GAAG,EAAC,yBAAT;AAAmC,IAAA,KAAK,EAAC;AAAzC,IADF,CADF,EAIE,MAAC,QAAD;AAAU,IAAA,IAAI,EAAC;AAAf,IAJF,CADF,EAOE,mBACE,MAAC,QAAD;AAAU,IAAA,IAAI,EAAC;AAAf,IADF,CAPF,CAXF,CANF,CAzDF,CADF;AA0FD,CApMD;;AAsMA,eAAeS,cAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\r\nimport SwipeableViews from \"react-swipeable-views\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport { AuthForm } from \"./AuthForm\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useRouter } from \"next/router\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Collapse from \"@material-ui/core/Collapse\";\r\nimport ExpandLess from \"@material-ui/icons/ExpandLess\";\r\nimport ExpandMore from \"@material-ui/icons/ExpandMore\";\r\nimport AccountBox from \"@material-ui/icons/AccountBox\";\r\nimport { unauthenticated } from \"../../redux/actions/auth\";\r\nimport Link from \"@material-ui/core/Link\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    \"& .MuiTab-textColorPrimary.Mui-selected\": {\r\n      color: \"#ffffff\",\r\n      background: \"var(--theme)\",\r\n    },\r\n    \"& .MuiTabs-indicator\": {\r\n      display: \"none\",\r\n    },\r\n    \"& .MuiTab-textColorPrimary\": {\r\n      background: \"#dfdfdf\",\r\n    },\r\n    \"& .MuiButton-containedPrimary\": {\r\n      marginTop: \"1rem\",\r\n    },\r\n  },\r\n  Login: {\r\n    position: \"relative\",\r\n    marginTop: \"5rem\",\r\n    \"&::before\": {\r\n      top: \"0\",\r\n      left: \"0\",\r\n      width: \"440px\",\r\n      height: \"440px\",\r\n      content: '\"\"',\r\n      zIndex: \"-1\",\r\n      position: \"absolute\",\r\n      transform: \"translate(-50%, -50%)\",\r\n      background: \"url(/static/images/circleCenter.svg)\",\r\n      backgroundSize: \"cover\",\r\n      backgroundRepeat: \"no-repeat\",\r\n    },\r\n    [theme.breakpoints.down(\"sm\")]:{\r\n      marginTop: '1.5rem'\r\n    }\r\n  },\r\n  Img: {\r\n    textAlign: \"center\",\r\n    [theme.breakpoints.down(\"sm\")]:{\r\n      '& img':{\r\n        height: '65px'\r\n      }\r\n    }\r\n  },\r\n  orange: {\r\n    color: \"#fff\",\r\n    backgroundColor: \"var(--theme)\",\r\n    width: \"30px\",\r\n    height: \"30px\",\r\n    fontSize: \"1rem\",\r\n  },\r\n  transparent: {\r\n    color: \"#000\",\r\n    width: \"30px\",\r\n    height: \"25px\",\r\n    backgroundColor: \"transparent\",\r\n  },\r\n  desktopMenu:{\r\n    '& .MuiPopover-paper':{\r\n      minWidth: '200px',\r\n      textAlign: 'right'\r\n    },\r\n    '& li':{\r\n      justifyContent: 'space-between'\r\n    }\r\n  }\r\n}));\r\n\r\nconst Login_Register = ({ isMobile = false, modalOpen = false }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [value, setValue] = React.useState(0);\r\n  const router = useRouter();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [openAMenu, setopenAMenu] = useState(false);\r\n  const [openBMenu, setopenBMenu] = useState(false);\r\n  const [openCMenu, setopenCMenu] = useState(false);\r\n  const [openDMenu, setopenDMenu] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const toggleModal = () => {\r\n    if (location.search.indexOf(\"signup=open\") != -1) {\r\n      setOpen(true);\r\n    } else if (modalOpen != open) {\r\n      setOpen(modalOpen);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    toggleModal()\r\n  }, [modalOpen]);\r\n\r\n\r\n\r\n  router.events.on('routeChangeComplete', toggleModal)\r\n\r\n  const accessToken = useSelector((state) => state.auth_user.accessToken);\r\n  const user = useSelector((state) => state.auth_user.user);\r\n  // console.log(\"User\", user);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  const handleChangeIndex = (index) => {\r\n    setValue(index);\r\n  };\r\n  const openModal = (event) => {\r\n    if (!accessToken) {\r\n      setOpen(true);\r\n    } else {\r\n      if (isMobile) {\r\n        gotoProfile();\r\n      } else {\r\n        setAnchorEl(event.currentTarget);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const gotoProfile = () => {\r\n    router.push(\"/profile\");\r\n  };\r\n  const gotoProfileEdit = () => {\r\n    router.push(\"/profile/edit\");\r\n  };\r\n  const gotoEvents = () => {\r\n    router.push(\"/profile/events\");\r\n  };\r\n  const gotoRequeste = () => {\r\n    router.push(\"/profile/requests\");\r\n  };\r\n  const gotoFavEvents = () =>{\r\n    router.push(\"/profile/favourite-events\");\r\n  };\r\n  const gotoFavProducts = () =>{\r\n    router.push(\"/profile/favourite-products\");\r\n  };\r\n  const gotoAddRequest = () =>{\r\n    router.push(\"/post/request\");\r\n  };\r\n  const gotoResetPassword = () => {\r\n    router.push(\"/profile/reset-password\");\r\n  }\r\n  \r\n\r\n  const logout = () => {\r\n    setAnchorEl(null);\r\n    router.push(\"/\");\r\n    dispatch(unauthenticated());\r\n  };\r\n\r\n  const toggleASubmenu = () => {\r\n    setopenAMenu(!openAMenu);\r\n  };\r\n  const toggleBSubmenu = () => {\r\n    setopenBMenu(!openBMenu);\r\n  };\r\n  const toggleCSubmenu = () => {\r\n    setopenCMenu(!openCMenu);\r\n  };\r\n  const toggleDSubmenu = () => {\r\n    setopenDMenu(!openDMenu);\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <Avatar\r\n        onClick={openModal}\r\n        aria-controls=\"auth-menu\"\r\n        aria-haspopup=\"true\"\r\n        className={user.first_name ? classes.orange : classes.transparent}\r\n      >\r\n        {user.first_name ? user.first_name.charAt(0) : <AccountCircleIcon />}\r\n      </Avatar>\r\n      <Menu\r\n        id=\"auth-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n        // open={!!menuPosition}\r\n        // onClose={() => setMenuPosition({}) || handleClose}\r\n        // anchorReference=\"anchorPosition\"\r\n        // anchorPosition={menuPosition}\r\n        className={classes.desktopMenu}\r\n      >\r\n        {/* <List> */}\r\n          <MenuItem button onClick={toggleASubmenu}>\r\n            Profile\r\n            {openAMenu ? <ExpandLess /> : <ExpandMore />}\r\n          </MenuItem>\r\n          <Collapse in={openAMenu} timeout=\"auto\" unmountOnExit>\r\n            <MenuItem onClick={gotoProfile}>View Profile</MenuItem>\r\n            <MenuItem onClick={gotoResetPassword}>Reset Password</MenuItem>\r\n          </Collapse>\r\n          <MenuItem button onClick={toggleBSubmenu}>\r\n            Ads\r\n            {openBMenu ? <ExpandLess /> : <ExpandMore />}\r\n          </MenuItem>\r\n          <Collapse in={openBMenu} timeout=\"auto\" unmountOnExit>\r\n            <MenuItem onClick={gotoProfile}>Published Ads</MenuItem>\r\n            <MenuItem onClick={gotoFavProducts}>Favourite Products</MenuItem>\r\n          </Collapse>\r\n          <MenuItem button onClick={toggleCSubmenu}>\r\n            Events\r\n            {openCMenu ? <ExpandLess /> : <ExpandMore />}\r\n          </MenuItem>\r\n          <Collapse in={openCMenu} timeout=\"auto\" unmountOnExit>\r\n            <MenuItem onClick={gotoEvents}>Published Events</MenuItem>\r\n            <MenuItem onClick={gotoFavEvents}>Favourite Events</MenuItem>\r\n          </Collapse>\r\n          <MenuItem button onClick={toggleDSubmenu}>\r\n            Requests\r\n            {openDMenu ? <ExpandLess /> : <ExpandMore />}\r\n          </MenuItem>\r\n          <Collapse in={openDMenu} timeout=\"auto\" unmountOnExit>\r\n            <MenuItem onClick={gotoRequeste}>Published Requests</MenuItem>\r\n            <MenuItem onClick={gotoAddRequest}>Add Product Request</MenuItem> \r\n          </Collapse>\r\n          <MenuItem onClick={logout}>Logout</MenuItem>\r\n      </Menu>\r\n\r\n      <Dialog\r\n        open={open}\r\n        onClose={closeModal}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        className={classes.modal}\r\n      >\r\n        <div className={classes.root}>\r\n          <Tabs\r\n            value={value}\r\n            onChange={handleChange}\r\n            variant=\"fullWidth\"\r\n            indicatorColor=\"primary\"\r\n            textColor=\"primary\"\r\n          >\r\n            <Tab label=\"Login\" />\r\n            <Tab label=\"SignUp\" />\r\n          </Tabs>\r\n          <SwipeableViews index={value} onChangeIndex={handleChangeIndex}>\r\n            <div className={classes.Login}>\r\n              <div className={classes.Img}>\r\n                <img src=\"/static/images/logo.png\" width=\"100\" />\r\n              </div>\r\n              <AuthForm type=\"login\" />\r\n            </div>\r\n            <div>\r\n              <AuthForm type=\"signup\" />\r\n            </div>\r\n          </SwipeableViews>\r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login_Register;\r\n"]},"metadata":{},"sourceType":"module"}