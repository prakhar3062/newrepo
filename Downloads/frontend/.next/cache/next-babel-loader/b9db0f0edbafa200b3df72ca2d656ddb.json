{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst updateDialog = (action, dialogs) => {\n  const alreadyUpdatedDialog = dialogs.map(elem => {\n    if (elem.id === action.dialog.id) {\n      return Object.assign(elem, action.dialog);\n    }\n\n    return elem;\n  });\n  return [...alreadyUpdatedDialog];\n};\n\nconst lazyFetchMessages = (action, messages) => {\n  const newArr = action.history.reverse().concat(messages[action.dialogId]);\n  return _objectSpread(_objectSpread({}, {}), {}, {\n    [action.dialogId]: newArr\n  });\n};\n\nconst sortedDialog = (action, dialogs) => {\n  const {\n    message,\n    count\n  } = action;\n  const updateDialog = dialogs.map(elem => {\n    if (elem.id === message.dialog_id) {\n      const newObj = {\n        last_message: message.body,\n        last_message_date_sent: message.date_sent,\n        updated_date: message.date_sent,\n        unread_messages_count: count ? elem.unread_messages_count += 1 : elem.unread_messages_count\n      };\n      return Object.assign(elem, newObj);\n    }\n\n    return elem;\n  });\n\n  const sort = (items, inverted = false) => items.sort((itemA, itemB) => {\n    const result = new Date(itemB.last_message_date_sent * 1000) - new Date(itemA.last_message_date_sent * 1000);\n    return inverted ? !result : result;\n  });\n\n  const result = sort(updateDialog);\n  return [...result];\n};\n\nconst updateStatusMessages = (action, message) => {\n  if (Object.keys(message).length === 0) {\n    return message;\n  }\n\n  const newMessages = message[action.dialogId].map((elem, index) => {\n    if (elem.id === action.msgId) {\n      const updateSendStatus = _objectSpread({}, elem);\n\n      updateSendStatus.send_state = action.msg.send_state;\n      return _objectSpread({}, updateSendStatus);\n    }\n\n    return elem;\n  });\n\n  const result = _objectSpread(_objectSpread({}, message), {}, {\n    [action.dialogId]: newMessages\n  });\n\n  return result;\n};\n\nconst fetchUsers = (action, users) => {\n  const newObjUsers = {};\n  action.forEach(elem => {\n    newObjUsers[elem.id] = elem;\n  });\n  return _objectSpread(_objectSpread({}, users), newObjUsers);\n};\n\nexport { updateDialog, lazyFetchMessages, sortedDialog, updateStatusMessages, fetchUsers };","map":{"version":3,"sources":["C:/Users/91911/Downloads/frontend/src/redux/reducers/reducer-function.js"],"names":["updateDialog","action","dialogs","alreadyUpdatedDialog","map","elem","id","dialog","Object","assign","lazyFetchMessages","messages","newArr","history","reverse","concat","dialogId","sortedDialog","message","count","dialog_id","newObj","last_message","body","last_message_date_sent","date_sent","updated_date","unread_messages_count","sort","items","inverted","itemA","itemB","result","Date","updateStatusMessages","keys","length","newMessages","index","msgId","updateSendStatus","send_state","msg","fetchUsers","users","newObjUsers","forEach"],"mappings":"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","sourcesContent":["const updateDialog = (action, dialogs) => {\n  const alreadyUpdatedDialog = dialogs.map((elem) => {\n    if (elem.id === action.dialog.id) {\n      return Object.assign(elem, action.dialog);\n    }\n    return elem;\n  });\n  return [...alreadyUpdatedDialog];\n};\n\nconst lazyFetchMessages = (action, messages) => {\n  const newArr = action.history.reverse().concat(messages[action.dialogId]);\n  return { ...{}, [action.dialogId]: newArr };\n};\n\nconst sortedDialog = (action, dialogs) => {\n  const { message, count } = action;\n  const updateDialog = dialogs.map((elem) => {\n    if (elem.id === message.dialog_id) {\n      const newObj = {\n        last_message: message.body,\n        last_message_date_sent: message.date_sent,\n        updated_date: message.date_sent,\n        unread_messages_count: count\n          ? (elem.unread_messages_count += 1)\n          : elem.unread_messages_count,\n      };\n      return Object.assign(elem, newObj);\n    }\n    return elem;\n  });\n\n  const sort = (items, inverted = false) =>\n    items.sort((itemA, itemB) => {\n      const result =\n        new Date(itemB.last_message_date_sent * 1000) -\n        new Date(itemA.last_message_date_sent * 1000);\n      return inverted ? !result : result;\n    });\n\n  const result = sort(updateDialog);\n\n  return [...result];\n};\n\nconst updateStatusMessages = (action, message) => {\n  if (Object.keys(message).length === 0) {\n    return message;\n  }\n\n  const newMessages = message[action.dialogId].map((elem, index) => {\n    if (elem.id === action.msgId) {\n      const updateSendStatus = { ...elem };\n      updateSendStatus.send_state = action.msg.send_state;\n      return { ...updateSendStatus };\n    }\n    return elem;\n  });\n\n  const result = { ...message, [action.dialogId]: newMessages };\n\n  return result;\n};\n\nconst fetchUsers = (action, users) => {\n  const newObjUsers = {};\n  action.forEach((elem) => {\n    newObjUsers[elem.id] = elem;\n  });\n  return { ...users, ...newObjUsers };\n};\n\nexport {\n  updateDialog,\n  lazyFetchMessages,\n  sortedDialog,\n  updateStatusMessages,\n  fetchUsers,\n};\n"]},"metadata":{},"sourceType":"module"}