{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Head from 'next/head';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport theme from '../src/theme';\nimport 'swiper/css/swiper.css';\nimport 'react-image-gallery/styles/css/image-gallery.css';\nimport { Provider } from 'react-redux';\nimport store from '../src/redux/store';\nimport NProgress from 'nprogress'; //nprogress module\n\nimport 'nprogress/nprogress.css';\nimport '../src/styles/global.css';\nimport 'cropperjs/dist/cropper.css'; // import \"~/node_modules/connectycube/dist/connectycube.min.js\";\n\nimport Router from 'next/router';\nimport { useRouter } from 'next/router';\nimport { CreateVisit, getSeller } from '../src/apis/global-api';\nimport { VALID_ROUTES } from '../src/constants';\nimport { firebaseCloudMessaging } from '../utils/webPush';\nimport firebase from 'firebase/app';\nimport { updateDeviceToken } from '../src/apis/auth-api'; // import OneSignal, { useOneSignalSetup } from 'react-onesignal';\n\nRouter.events.on('routeChangeStart', () => {\n  NProgress.start();\n});\nRouter.events.on('routeChangeComplete', () => {\n  isuserProfileComplete();\n  NProgress.done();\n});\nRouter.events.on('routeChangeError', () => NProgress.done());\n\nconst isuserProfileComplete = () => {\n  let userData = window.localStorage.getItem('user');\n  userData = userData ? JSON.parse(userData) : '';\n  let accessTokenData = window.localStorage.getItem('accessToken');\n\n  if (accessTokenData && accessTokenData != 'undefined' && userData) {\n    // setToken(userData);\n    // firebaseCloudMessaging.init(userData)\n    console.log(Router.router.route);\n\n    if (!userData.email_verified_at && Router.router.route != '/verify') {\n      getSeller(userData.id).then(user => {\n        if (user.email_verified_at && !user.is_complete && Router.router.asPath != '/profile/edit') {\n          localStorage.setItem('user', JSON.stringify(user));\n          Router.push('/profile/edit');\n        } else if (Router.router.route != '/not-verified-email') {\n          Router.push('/not-verified-email');\n        }\n      });\n      return false;\n    } else if (userData.email_verified_at && !userData.is_complete && Router.router.asPath != '/profile/edit') {\n      Router.push('/profile/edit');\n    } else {\n      setUserVisit(userData);\n    }\n  }\n};\n\nconst setUserVisit = userData => {\n  let route = Router.router.route.replace('/', '');\n  if (!route) return;\n\n  if (route == 'products') {\n    let {\n      type,\n      s\n    } = Router.router.query;\n\n    if (type == 'buy') {\n      route = 'products-buy';\n    }\n\n    if (type == 'sell') {\n      route = 'products-sell';\n    }\n\n    if (s) {\n      route = 'products-search';\n    }\n  }\n\n  var routeExist = VALID_ROUTES.find(obj => obj.route === route);\n  console.log('routetest', Router.router, route, routeExist);\n  if (!routeExist) return;\n  let data = {\n    user_id: userData.id,\n    feature: routeExist.title\n  };\n  CreateVisit(data).then(data => {\n    console.log(data);\n  });\n}; // const setToken = async (userData) => {\n//   try {\n//     const token = await firebaseCloudMessaging.init(userData);\n//     if (token) {\n//       getMessage();\n//     }\n//   } catch (error) {\n//     console.log(error);\n//   }\n// }\n\n\nconst getMessage = () => {\n  const messaging = firebase.messaging();\n  messaging.onMessage(message => console.log('foreground', message));\n};\n\nexport default function MyApp(props) {\n  const {\n    Component,\n    pageProps\n  } = props;\n  const router = useRouter();\n  const {\n    0: onesignalinit,\n    1: setonesignalinit\n  } = useState(false); // useOneSignalSetup(() => {\n  // let userData = window.localStorage.getItem(\"user\");\n  // userData = userData ? JSON.parse(userData) : \"\";\n  // if (userData) {\n  //   OneSignal.setEmail(userData.email);\n  //   OneSignal.setExternalUserId(userData.id);\n  // }\n  // });\n\n  React.useEffect(() => {\n    let userData = window.localStorage.getItem('user');\n    userData = userData ? JSON.parse(userData) : '';\n    var OneSignal = window.OneSignal || [];\n    var initConfig = {\n      appId: process.env.ONESIGNAL_APP_ID,\n      notifyButton: {\n        enable: true\n      }\n    };\n\n    if (userData) {\n      OneSignal.push(function () {\n        OneSignal.SERVICE_WORKER_PARAM = {\n          scope: '/subdirectory/'\n        };\n        OneSignal.SERVICE_WORKER_PATH = 'subdirectory/OneSignalSDKWorker.js';\n        OneSignal.SERVICE_WORKER_UPDATER_PATH = 'subdirectory/OneSignalSDKUpdaterWorker.js';\n\n        if (!onesignalinit) {\n          OneSignal.init(initConfig);\n          setonesignalinit(true);\n        } // if (userData) {\n\n\n        OneSignal.getUserId(function (userId) {\n          if (userId != userData.device_token) {\n            updateDeviceToken(userData.id, userId).then(result => {\n              userData.device_token = userId;\n              window.localStorage.setItem('user', JSON.stringify(userData));\n            });\n          }\n\n          console.log(userData, userId);\n        });\n        OneSignal.sendTag('user', userData.id); // }\n      });\n    }\n\n    isuserProfileComplete(); // Remove the server-side injected CSS.\n\n    const jssStyles = document.querySelector('#jss-server-side');\n\n    if (jssStyles) {\n      jssStyles.parentElement.removeChild(jssStyles);\n    }\n  }, []); // const setToken = async (userData) => {\n  //   // try {\n  //   //   const token = await firebaseCloudMessaging.init(userData);\n  //   //   if (token) {\n  //   //     getMessage();\n  //   //   }\n  //   // } catch (error) {\n  //   //   console.log(error);\n  //   // }\n  // }\n\n  return __jsx(Provider, {\n    store: store\n  }, __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", null, \"HomePage\"), __jsx(\"meta\", {\n    name: \"viewport\",\n    content: \"minimum-scale=1, initial-scale=1, width=device-width\"\n  })), __jsx(ThemeProvider, {\n    theme: theme\n  }, __jsx(CssBaseline, null), __jsx(Component, pageProps))));\n}\nMyApp.propTypes = {\n  Component: PropTypes.func.isRequired,\n  pageProps: PropTypes.object.isRequired\n};","map":{"version":3,"sources":["C:/Users/91911/Downloads/frontend/src/pages/_app.js"],"names":["React","useState","PropTypes","Head","ThemeProvider","CssBaseline","theme","Provider","store","NProgress","Router","useRouter","CreateVisit","getSeller","VALID_ROUTES","firebaseCloudMessaging","firebase","updateDeviceToken","events","on","start","isuserProfileComplete","done","userData","window","localStorage","getItem","JSON","parse","accessTokenData","console","log","router","route","email_verified_at","id","then","user","is_complete","asPath","setItem","stringify","push","setUserVisit","replace","type","s","query","routeExist","find","obj","data","user_id","feature","title","getMessage","messaging","onMessage","message","MyApp","props","Component","pageProps","onesignalinit","setonesignalinit","useEffect","OneSignal","initConfig","appId","process","env","ONESIGNAL_APP_ID","notifyButton","enable","SERVICE_WORKER_PARAM","scope","SERVICE_WORKER_PATH","SERVICE_WORKER_UPDATER_PATH","init","getUserId","userId","device_token","result","sendTag","jssStyles","document","querySelector","parentElement","removeChild","propTypes","func","isRequired","object"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Head from 'next/head';\r\nimport { ThemeProvider } from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport theme from '../src/theme';\r\nimport 'swiper/css/swiper.css';\r\nimport 'react-image-gallery/styles/css/image-gallery.css';\r\nimport { Provider } from 'react-redux';\r\nimport store from '../src/redux/store';\r\nimport NProgress from 'nprogress'; //nprogress module\r\nimport 'nprogress/nprogress.css';\r\nimport '../src/styles/global.css';\r\nimport 'cropperjs/dist/cropper.css';\r\n// import \"~/node_modules/connectycube/dist/connectycube.min.js\";\r\n\r\nimport Router from 'next/router';\r\nimport { useRouter } from 'next/router';\r\nimport { CreateVisit, getSeller } from '../src/apis/global-api';\r\nimport { VALID_ROUTES } from '../src/constants';\r\nimport { firebaseCloudMessaging } from '../utils/webPush';\r\nimport firebase from 'firebase/app';\r\nimport { updateDeviceToken } from '../src/apis/auth-api';\r\n// import OneSignal, { useOneSignalSetup } from 'react-onesignal';\r\n\r\nRouter.events.on('routeChangeStart', () => {\r\n  NProgress.start();\r\n});\r\nRouter.events.on('routeChangeComplete', () => {\r\n  isuserProfileComplete();\r\n  NProgress.done();\r\n});\r\nRouter.events.on('routeChangeError', () => NProgress.done());\r\nconst isuserProfileComplete = () => {\r\n  let userData = window.localStorage.getItem('user');\r\n  userData = userData ? JSON.parse(userData) : '';\r\n  let accessTokenData = window.localStorage.getItem('accessToken');\r\n  if (accessTokenData && accessTokenData != 'undefined' && userData) {\r\n    // setToken(userData);\r\n    // firebaseCloudMessaging.init(userData)\r\n    console.log(Router.router.route);\r\n    if (!userData.email_verified_at && Router.router.route != '/verify') {\r\n      getSeller(userData.id).then((user) => {\r\n        if (\r\n          user.email_verified_at &&\r\n          !user.is_complete &&\r\n          Router.router.asPath != '/profile/edit'\r\n        ) {\r\n          localStorage.setItem('user', JSON.stringify(user));\r\n          Router.push('/profile/edit');\r\n        } else if (Router.router.route != '/not-verified-email') {\r\n          Router.push('/not-verified-email');\r\n        }\r\n      });\r\n\r\n      return false;\r\n    } else if (\r\n      userData.email_verified_at &&\r\n      !userData.is_complete &&\r\n      Router.router.asPath != '/profile/edit'\r\n    ) {\r\n      Router.push('/profile/edit');\r\n    } else {\r\n      setUserVisit(userData);\r\n    }\r\n  }\r\n};\r\nconst setUserVisit = (userData) => {\r\n  let route = Router.router.route.replace('/', '');\r\n\r\n  if (!route) return;\r\n\r\n  if (route == 'products') {\r\n    let { type, s } = Router.router.query;\r\n    if (type == 'buy') {\r\n      route = 'products-buy';\r\n    }\r\n    if (type == 'sell') {\r\n      route = 'products-sell';\r\n    }\r\n    if (s) {\r\n      route = 'products-search';\r\n    }\r\n  }\r\n\r\n  var routeExist = VALID_ROUTES.find((obj) => obj.route === route);\r\n  console.log('routetest', Router.router, route, routeExist);\r\n  if (!routeExist) return;\r\n\r\n  let data = {\r\n    user_id: userData.id,\r\n    feature: routeExist.title,\r\n  };\r\n  CreateVisit(data).then((data) => {\r\n    console.log(data);\r\n  });\r\n};\r\n\r\n// const setToken = async (userData) => {\r\n//   try {\r\n//     const token = await firebaseCloudMessaging.init(userData);\r\n//     if (token) {\r\n//       getMessage();\r\n//     }\r\n//   } catch (error) {\r\n//     console.log(error);\r\n//   }\r\n\r\n// }\r\nconst getMessage = () => {\r\n  const messaging = firebase.messaging();\r\n  messaging.onMessage((message) => console.log('foreground', message));\r\n};\r\n\r\nexport default function MyApp(props) {\r\n  const { Component, pageProps } = props;\r\n  const router = useRouter();\r\n  const [onesignalinit, setonesignalinit] = useState(false);\r\n\r\n  // useOneSignalSetup(() => {\r\n  // let userData = window.localStorage.getItem(\"user\");\r\n  // userData = userData ? JSON.parse(userData) : \"\";\r\n\r\n  // if (userData) {\r\n  //   OneSignal.setEmail(userData.email);\r\n  //   OneSignal.setExternalUserId(userData.id);\r\n  // }\r\n\r\n  // });\r\n\r\n  React.useEffect(() => {\r\n    let userData = window.localStorage.getItem('user');\r\n    userData = userData ? JSON.parse(userData) : '';\r\n    var OneSignal = window.OneSignal || [];\r\n    var initConfig = {\r\n      appId: process.env.ONESIGNAL_APP_ID,\r\n      notifyButton: {\r\n        enable: true,\r\n      },\r\n    };\r\n\r\n    if (userData) {\r\n      OneSignal.push(function () {\r\n        OneSignal.SERVICE_WORKER_PARAM = { scope: '/subdirectory/' };\r\n        OneSignal.SERVICE_WORKER_PATH = 'subdirectory/OneSignalSDKWorker.js';\r\n        OneSignal.SERVICE_WORKER_UPDATER_PATH =\r\n          'subdirectory/OneSignalSDKUpdaterWorker.js';\r\n        if (!onesignalinit) {\r\n          OneSignal.init(initConfig);\r\n          setonesignalinit(true);\r\n        }\r\n        // if (userData) {\r\n        OneSignal.getUserId(function (userId) {\r\n          if (userId != userData.device_token) {\r\n            updateDeviceToken(userData.id, userId).then((result) => {\r\n              userData.device_token = userId;\r\n              window.localStorage.setItem('user', JSON.stringify(userData));\r\n            });\r\n          }\r\n          console.log(userData, userId);\r\n        });\r\n        OneSignal.sendTag('user', userData.id);\r\n        // }\r\n      });\r\n    }\r\n    isuserProfileComplete();\r\n    // Remove the server-side injected CSS.\r\n    const jssStyles = document.querySelector('#jss-server-side');\r\n    if (jssStyles) {\r\n      jssStyles.parentElement.removeChild(jssStyles);\r\n    }\r\n  }, []);\r\n\r\n  // const setToken = async (userData) => {\r\n\r\n  //   // try {\r\n  //   //   const token = await firebaseCloudMessaging.init(userData);\r\n  //   //   if (token) {\r\n  //   //     getMessage();\r\n  //   //   }\r\n  //   // } catch (error) {\r\n  //   //   console.log(error);\r\n  //   // }\r\n\r\n  // }\r\n\r\n  return (\r\n    <Provider store={store}>\r\n      <React.Fragment>\r\n        <Head>\r\n          <title>HomePage</title>\r\n          <meta\r\n            name=\"viewport\"\r\n            content=\"minimum-scale=1, initial-scale=1, width=device-width\"\r\n          />\r\n        </Head>\r\n        <ThemeProvider theme={theme}>\r\n          {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\r\n          <CssBaseline />\r\n          <Component {...pageProps} />\r\n        </ThemeProvider>\r\n      </React.Fragment>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nMyApp.propTypes = {\r\n  Component: PropTypes.func.isRequired,\r\n  pageProps: PropTypes.object.isRequired,\r\n};\r\n"]},"metadata":{},"sourceType":"module"}