{"version":3,"file":"index.es.js","sources":["../src/constants/permissionStatusEnum.ts","../src/oneSignal.ts","../src/hooks/useInterval/index.ts","../src/hooks/useOneSignalSetup/index.ts"],"sourcesContent":["/**\n * Defines possible values for permissions statuses.\n */\nenum permissionStatusEnum {\n  Default = 'default',\n  Granted = 'granted',\n  Denied = 'denied',\n}\n\nexport default permissionStatusEnum;\n","import {\n  IOneSignal, OneSignalOptions, IOneSignalEvent, IOneSignalAutoPromptOptions,\n} from './oneSignal.types';\n\nconst DEFAULT_BASE_SCRIPT_ID = 'react-onesignal-base';\n\nconst DEFAULT_MODULE_SCRIPT_ID = 'react-onesignal-module';\n\n/**\n * Provides the OneSignal script to inject.\n */\nconst ONE_SIGNAL_SCRIPT_SRC = 'https://cdn.onesignal.com/sdks/OneSignalSDK.js';\n\n/**\n * Error to be thrown when OneSignal is not setup correctly.\n */\nconst ONESIGNAL_NOT_SETUP_ERROR = 'OneSignal is not setup correctly.';\n\n/**\n * Maps The Options Object Into A String For The Module Script\n * @param options the options object\n * @param indent\n */\nconst mapOptionsObject = (options: any, indent: number = 0) => {\n  const TABS_LENGTH = 2;\n\n  let result = '';\n\n  const optionKeys = Object.keys(options || {});\n\n  for (let index = 0; index < optionKeys.length; index += 1) {\n    let key = optionKeys[index];\n\n    const hasOwnProperty = Object.prototype.hasOwnProperty.call(options, key);\n\n    if (!hasOwnProperty) {\n      continue;\n    }\n\n    const option = options[key];\n\n    // Functions are not supported, so we'll ignore them\n    if (typeof option === 'function') {\n      continue;\n    }\n\n    if (key.includes('.')) {\n      key = `\"${key}\"`;\n    }\n\n    result += `${new Array(TABS_LENGTH * indent + 1).join(' ') + key}: `;\n\n    switch (typeof option) {\n      case 'object':\n        result += `{\\n${mapOptionsObject(option, indent + 1)}${new Array(4 * indent + 1).join(' ')}}`;\n        break;\n\n      case 'boolean':\n      case 'number':\n        result += option;\n        break;\n\n      default:\n        result += `\"${option}\"`;\n        break;\n    }\n\n    result += ',\\n';\n  }\n\n  return result;\n};\n\n/**\n * Take our object of OneSignal events and construct listeners.\n *\n * @param eventsArr Array of event/callback key/value pairs defined by IOneSignalEvent interface.\n * @return {string} Script snippet for injecting into the native OneSignal.push()  method.\n */\nconst buildEventListeners = (eventsArr: IOneSignalEvent[]) => {\n  let returnStr = '';\n\n  // Let's make sure we've got an array that isn't empty.\n  if (Array.isArray(eventsArr) && eventsArr.length) {\n    eventsArr.forEach((event) => {\n      event.listener = event.listener || 'on';\n      returnStr += `OneSignal.${event.listener}('${event.event}', ${event.callback});`;\n    });\n  }\n  return returnStr;\n};\n\n/**\n * Provides the module script content to inject.\n */\nconst getModuleScriptBody = (\n  appId: string,\n  options: OneSignalOptions = {},\n  events: IOneSignalEvent[] = [],\n) => {\n  const mappedOptions = mapOptionsObject(options);\n  const listeners = buildEventListeners(events);\n\n  return `\n    var OneSignal = window.OneSignal || [];\n    OneSignal.push(function() {\n      ${listeners}\n      OneSignal.init({\n        appId: \"${appId}\",\n        ${mappedOptions}\n      });\n    });\n  `;\n};\n\n/**\n * Gets the window OneSignal instance.\n */\nexport const getOneSignalInstance = () => {\n  const OneSignal: IOneSignal = window['OneSignal'];\n\n  if (OneSignal?.initialized) {\n    return OneSignal;\n  }\n\n  return null;\n};\n\n/**\n * Injects one script into the DOM.\n * @param id script id.\n * @param buildScript script factory.\n */\nconst injectScript = (\n  id: string,\n  buildScript: (script: HTMLScriptElement) => HTMLScriptElement,\n) => {\n  const hasScript = !!document.getElementById(id);\n\n  if (hasScript) {\n    return;\n  }\n\n  let script = document.createElement('script');\n\n  script.id = id;\n\n  script = buildScript(script);\n\n  document.body.appendChild(script);\n};\n\n/**\n * Injects the base script for OneSignal\n */\nconst injectBaseScript = () => {\n  injectScript(DEFAULT_BASE_SCRIPT_ID, (script) => {\n    script.src = ONE_SIGNAL_SCRIPT_SRC;\n\n    return script;\n  });\n};\n\n/**\n * Injects the module script for OneSignal\n */\nconst injectModuleScript = (\n  appId: string,\n  options: OneSignalOptions = {},\n  events: IOneSignalEvent[] = [],\n) => {\n  injectScript(DEFAULT_MODULE_SCRIPT_ID, (script) => {\n    script.innerHTML = getModuleScriptBody(appId, options, events);\n    script.async = true;\n\n    return script;\n  });\n};\n\n/**\n * Initializes OneSignal.\n */\nconst initialize = (appId: string, options: OneSignalOptions, events: IOneSignalEvent[] = []) => {\n  if (!appId) {\n    throw new Error('You need to provide your OneSignal appId.');\n  }\n\n  if (!document) {\n    return;\n  }\n\n  injectBaseScript();\n  injectModuleScript(appId, options, events);\n};\n\n/**\n * Array with every possible notification permission state.\n */\nconst notificationPermission = () => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    return null;\n  }\n\n  return oneSignal.notificationPermission;\n};\n\n/**\n * Gets the current notification permission state.\n */\nconst getNotificationPermission = () => new Promise<string>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.getNotificationPermission()\n      .then((value) => resolve(value))\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Attempt to register for push notifications.\n * If the user hasn't authorized push notifications yet,\n * this will show a prompt to do so.\n */\nconst registerForPushNotifications = () => new Promise<any>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.registerForPushNotifications()\n      .then((value) => resolve(value))\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Shows a sliding modal prompt on the page for users.\n */\nconst showSlidedownPrompt = (\n  options?: IOneSignalAutoPromptOptions,\n) => new Promise<void>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.showSlidedownPrompt(options)\n      .then(((value) => resolve(value)))\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Shows a category sliding modal prompt on the page for users.\n */\nconst showCategorySlidedown = (\n  options?: IOneSignalAutoPromptOptions,\n) => new Promise<void>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.showCategorySlidedown(options)\n      .then(((value) => resolve(value)))\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Check if the user has already accepted push notifications and\n * successfully registered with Google's FCM server and OneSignal's\n * server (i.e. the user is able to receive notifications).\n * Only compatible with HTTPS\n *\n * @return {Promise<boolean>} A promise that return if the user is\n * able to receive notifications\n */\nconst isPushNotificationsEnabled = () => new Promise<boolean>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject();\n    return;\n  }\n\n  try {\n    oneSignal.isPushNotificationsEnabled()\n      .then(((value) => resolve(value)))\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Check if the current browser environment viewing the page\n * supports push notifications.\n *\n * @return {boolean} The current browser environment viewing the page\n * supports push notifications.\n */\nconst isPushNotificationsSupported = () => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    return null;\n  }\n\n  return oneSignal.isPushNotificationsSupported();\n};\n\n/**\n * This function lets a site mute or unmute notifications for the current user.\n *\n * @param {boolean} unmute\n */\nconst setSubscription = (unmute: boolean) => new Promise<any>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.setSubscription(unmute)\n      .then((value) => resolve(value))\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Sets the email on OneSignal instance.\n * @param email email\n */\nconst setEmail = (email: string) => new Promise<string>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.setEmail(email)\n      .then((value) => resolve(value))\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Remove email on OneSignal instance.\n */\nconst logoutEmail = () => new Promise<void>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.logoutEmail()\n      .then((value) => resolve(value))\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Gets the email ID configured on OneSignal instance.\n */\nconst getEmailId = () => new Promise<string>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.getEmailId()\n      .then((value) => resolve(value))\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Returns the Player ID from this browser.\n */\nconst getPlayerId = () => new Promise<string>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.getUserId()\n      .then((value) => resolve(value))\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Sets the external user ID on OneSignal instance.\n * @param externalUserId The external user ID\n */\nconst setExternalUserId = (\n  externalUserId: string | number,\n) => new Promise<void>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.setExternalUserId(externalUserId)\n      .then(() => resolve())\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Sets the external user ID on OneSignal instance.\n */\nconst removeExternalUserId = (\n) => new Promise<void>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.removeExternalUserId()\n      .then(() => resolve())\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Gets the external user ID configured on OneSignal instance.\n */\nconst getExternalUserId = () => new Promise<string>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.getExternalUserId()\n      .then((value) => resolve(value))\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Sets a key/value \"tag\" pair on OneSignal.\n *\n * @param key string\n * @param val string\n */\nconst sendTag = (key: string, val: string) => new Promise<string>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.sendTag(key, val)\n      .then((value) => resolve(value))\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n/**\n * Sets a collection of key/value \"tag\" pairs on OneSignal.\n *\n * @param keyValues obj\n */\nconst sendTags = (keyValues: object) => new Promise<string>((resolve, reject) => {\n  const oneSignal = getOneSignalInstance();\n\n  if (!oneSignal) {\n    reject(new Error(ONESIGNAL_NOT_SETUP_ERROR));\n    return;\n  }\n\n  try {\n    oneSignal.sendTags(keyValues)\n      .then((value) => resolve(value))\n      .catch((error) => reject(error));\n  } catch (error) {\n    reject(error);\n  }\n});\n\n\n/**\n * Object for manipulating OneSignal.\n */\nconst ReactOneSignal = {\n  getOneSignalInstance,\n  initialize,\n  notificationPermission,\n  getNotificationPermission,\n  registerForPushNotifications,\n  showSlidedownPrompt,\n  showCategorySlidedown,\n  isPushNotificationsEnabled,\n  isPushNotificationsSupported,\n  setSubscription,\n  setEmail,\n  logoutEmail,\n  getEmailId,\n  getPlayerId,\n  setExternalUserId,\n  removeExternalUserId,\n  getExternalUserId,\n  sendTag,\n  sendTags,\n};\n\nexport default ReactOneSignal;\n","import { useEffect, useRef } from 'react';\n\n/**\n * Hook that exposes an interval, similar to setInterval.\n * @param callback The callback function\n * @param delay The delay\n */\nfunction useInterval(callback: () => void, delay: number | null) {\n  const savedCallback = useRef<() => void>();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    if (delay !== null && savedCallback.current) {\n      const tick = () => {\n        savedCallback.current!();\n      };\n\n      const id = setInterval(tick, delay);\n\n      return () => clearInterval(id);\n    }\n\n    return () => {};\n  }, [delay]);\n}\n\nexport default useInterval;\n","import { useState } from 'react';\n\nimport { getOneSignalInstance } from '../../oneSignal';\nimport useInterval from '../useInterval';\n\n/**\n * Hook that waits for oneSignal initialization before executing the callback\n * useful for using setEmail and setExternalUserId without getting error\n * it uses setInterval to check if OneSignal is setup, calling the callback when it is\n *\n * @param callback the callback to be called when oneSignal is initialized.\n * @param pollingIntervalMs time between checks, null to disable.\n */\nconst useOneSignalSetup = (\n  callback: () => void,\n  pollingIntervalMs: number | null = 100,\n) => {\n  const [initialized, setInitialized] = useState(false);\n\n  useInterval(() => {\n    const oneSignal = getOneSignalInstance();\n    if (oneSignal) {\n      setInitialized(true);\n      callback();\n    }\n  }, initialized ? null : pollingIntervalMs);\n};\n\nexport default useOneSignalSetup;\n"],"names":[],"mappings":"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"}